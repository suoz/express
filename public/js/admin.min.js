"use strict";function refresh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=$("#newstable tbody");$.ajax({url:"/admin/refresh",dataType:"json",data:{page:e,pagenumber:t},type:"GET",success:function(e){var t="";e.forEach(function(e){t+="<tr>\n                        <td>"+e.newsid+"</td>\n                        <td>"+e.newstitle+"</td>\n                        <td>"+e.newsimg+"</td>\n                        <td>"+e.newstype+'</td>\n                        <td>\n                        <button class="btn btn-primary btn-xs">编辑</button>\n                        <button class="btn btn-danger btn-xs">删除</button>\n                        </td>\n                        </tr>'}),n.html(t)}})}$(function(){alert("aa");var e=$("#newstable tbody");refresh(),$("#page").on("click",".pagenumber",function(){refresh($(this).text())}),$("#submitbtn").click(function(){var e=$("#newstitle").val(),t=$("#newstime").val(),n=$("#newsimg").val(),a=$("#newstype").val();$.ajax({url:"admin/insert",data:{newstitle:e,newstime:t,newsimg:n,newstype:a},type:"POST",success:function(e){e?(refresh(),console.log("insert success")):console.log("insert error")}})});var t=void 0;e.on("click",".btn-primary",function(){$("#updateModel").fadeIn(),t=$(this).parent().parent().find("td")[0].innerHTML;var e=$(this).parent().parent().find("td")[1].innerHTML,n=$(this).parent().parent().find("td")[2].innerHTML,a=$(this).parent().parent().find("td")[3].innerHTML;$("#unewstitle").val(e),$("#unewsimg").val(n),$("#unewstype").val(a)}),$("#confirmupdate").click(function(){$("#updateModel").fadeOut();var e=$("#unewstitle").val(),n=$("#unewstime").val(),a=$("#unewsimg").val(),s=$("#unewstype").val();$.ajax({url:"/admin/update",data:{newsid:t,newstitle:e,newstime:n,newsimg:a,newstype:s},type:"POST",success:function(e){e?(refresh(),console.log("update success")):console.log("update error")}})}),$(".close").click(function(){$("#updateModel").fadeOut(),$("#deleteModel").fadeOut()}),$(".btn-default").click(function(){$("#deleteModel").fadeOut(),$("#updateModel").fadeOut()}),e.on("click",".btn-danger",function(){$("#deleteModel").fadeIn(),t=$(this).parent().parent().find("td")[0].innerHTML}),$("#confirmdelete").click(function(){$("#deleteModel").fadeOut(),$.ajax({url:"/admin/delete",data:{newsid:t},type:"GET",success:function(e){e?(refresh(),console.log("delete success")):console.log("delete error")}})})});